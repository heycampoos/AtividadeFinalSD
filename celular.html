<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Samsung Galaxy S24 | WINKEL</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800" rel="stylesheet">

    <link rel="stylesheet" href="css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" href="css/animate.css">
    
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/owl.theme.default.min.css">
    <link rel="stylesheet" href="css/magnific-popup.css">

    <link rel="stylesheet" href="css/aos.css">

    <link rel="stylesheet" href="css/ionicons.min.css">

    <link rel="stylesheet" href="css/bootstrap-datepicker.css">
    <link rel="stylesheet" href="css/jquery.timepicker.css">

    
    <link rel="stylesheet" href="css/flaticon.css">
    <link rel="stylesheet" href="css/icomoon.css">
    <link rel="stylesheet" href="css/style.css">
  </head>
  <body class="goto-here">
    <nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
	    <div class="container">
	      <a class="navbar-brand" href="index.html">Winkel</a>
	      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
	        <span class="oi oi-menu"></span> Menu
	      </button>

	      <div class="collapse navbar-collapse" id="ftco-nav">
	        <ul class="navbar-nav ml-auto">
	          <li class="nav-item"><a href="index.html" class="nav-link">Home</a></li>
	        </ul>
	      </div>
	    </div>
	  </nav>
    <!-- END nav -->

    <section class="ftco-section">
    	<div class="container">
    		<div class="row">
    			<div class="col-lg-6 mb-5 ftco-animate">
    				<a href="images/celular.jpg" class="image-popup"><img src="images/celular.jpg" class="img-fluid" alt="Colorlib Template"></a>
    			</div>
    			<div class="col-lg-6 product-details pl-md-5 ftco-animate">
    				<h3>Samsung Galaxy S24</h3>
    				<p class="price"><span>R$2499,90</span></p>
            <div style="text-align: center; font-family: Arial, sans-serif;">
              <p>Prepare-se para elevar sua experi√™ncia m√≥vel com o novo <strong>Samsung Galaxy S24 com Galaxy AI</strong>. Seja para trabalho ou entretenimento, o Galaxy S24 est√° pronto para tudo!</p>
              <h3>Por que escolher o Galaxy S24?</h3>
              <ul style="list-style-type: none; padding: 0;">
                  <li>üì∏ <strong>C√¢mera de Alta Resolu√ß√£o</strong>: Capture cada detalhe com clareza surpreendente, de dia ou √† noite.</li>
                  <li>‚ö° <strong>Desempenho Poderoso</strong>: Processador de √∫ltima gera√ß√£o para executar aplicativos pesados e jogos com fluidez.</li>
                  <li>üîã <strong>Bateria de Longa Dura√ß√£o</strong>: Fique conectado o dia todo sem preocupa√ß√µes.</li>
                  <li>üíß <strong>Resist√™ncia √† √Ågua e Poeira</strong>: Durabilidade para todos os estilos de vida.</li>
                  <li>üì± <strong>Tela Dynamic AMOLED 2X</strong>: Cores vibrantes e nitidez incompar√°vel para uma experi√™ncia visual imersiva.</li>
              </ul>
          </div>          
    	</div>
		<div class="container">
			<div class="comment-section">
				<h3>Adicione um coment√°rio</h3>
				<form id="commentForm">
					<textarea id="userName" class="form-control" placeholder="Escreva seu nome"></textarea>
					<br>
					<textarea id="userComment" class="form-control" placeholder="Escreva seu coment√°rio aqui"></textarea>
					<br>
					<input type="number" id="userRating" class="form-control" placeholder="Sua nota (1-5)" min="1" max="5" />
					<br>
					<button type="button" class="btn btn-primary" onclick="sendComment()">Enviar</button>
				</form>
			</div>
		

			<h2>Resumo das avalia√ß√µes</h2>
    <div id="resumo"></div>

    <h2>Avalia√ß√µes dos Usu√°rios</h2>
    <input type="text" id="filtro-palavra-chave" placeholder="Filtrar por palavra-chave">
    <button id="botao-filtrar">Filtrar</button>
    <div id="avaliacoes"></div>

		</div>
    </section>

		

		



    <footer class="ftco-footer bg-light ftco-section">
      <div class="container">
      	<div class="row">
      		<div class="mouse">
						<a href="#" class="mouse-icon">
							<div class="mouse-wheel"><span class="ion-ios-arrow-up"></span></div>
						</a>
					</div>
      	</div>
        <div class="row mb-5">
          <div class="col-md">
            <div class="ftco-footer-widget mb-4">
              <h2 class="ftco-heading-2">Winkel</h2>
              <p>De Bel√©m a Europa, a sua loja de eletr√¥nicos pessoais.</p>
              <ul class="ftco-footer-social list-unstyled float-md-left float-lft mt-5">
                <li class="ftco-animate"><a href="#"><span class="icon-twitter"></span></a></li>
                <li class="ftco-animate"><a href="#"><span class="icon-facebook"></span></a></li>
                <li class="ftco-animate"><a href="#"><span class="icon-instagram"></span></a></li>
              </ul>
            </div>
          </div>
          <div class="col-md">
            <div class="ftco-footer-widget mb-4 ml-md-5">
              <h2 class="ftco-heading-2">Menu</h2>
              <ul class="list-unstyled">
                <li><a href="#" class="py-2 d-block">Loja</a></li>
                <li><a href="#" class="py-2 d-block">Sobre a empresa</a></li>
                <li><a href="#" class="py-2 d-block">Blog</a></li>
                <li><a href="#" class="py-2 d-block">Entre em contato</a></li>
              </ul>
            </div>
          </div>
          <div class="col-md-4">
             <div class="ftco-footer-widget mb-4">
              <h2 class="ftco-heading-2">Ajuda</h2>
              <div class="d-flex">
	              <ul class="list-unstyled mr-l-5 pr-l-3 mr-4">
	                <li><a href="#" class="py-2 d-block">Formas de envio</a></li>
	                <li><a href="#" class="py-2 d-block">Trocas &amp; Devolu√ß√µes</a></li>
	                <li><a href="#" class="py-2 d-block">Termos &amp; Condi√ß√µes</a></li>
	                <li><a href="#" class="py-2 d-block">LGPD</a></li>
	              </ul>
	              <ul class="list-unstyled">
	                <li><a href="#" class="py-2 d-block">FAQs</a></li>
	                <li><a href="#" class="py-2 d-block">Contatos</a></li>
	              </ul>
	            </div>
            </div>
          </div>
          <div class="col-md">
            <div class="ftco-footer-widget mb-4">
            	<h2 class="ftco-heading-2">Ainda com d√∫vidas?</h2>
            	<div class="block-23 mb-3">
	              <ul>
	                <li><span class="icon icon-map-marker"></span><span class="text">Av. Visconde de Souza Franco, 34 - Quadra Corporate - Bel√©m, Par√°, Brasil</span></li>
	                <li><a href="#"><span class="icon icon-phone"></span><span class="text">3276-9989</span></a></li>
	                <li><a href="#"><span class="icon icon-envelope"></span><span class="text">contato@winkel.com.br</span></a></li>
	              </ul>
	            </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12 text-center">

            <p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
						  Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="icon-heart color-danger" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
						  <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
						</p>
          </div>
        </div>
      </div>
    </footer>
    
  

  <!-- loader -->
  <div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#F96D00"/></svg></div>

  <script>
	let avaliacoesData = null;

        // Fun√ß√£o para exibir o resumo
        function displayResumo(data) {
            const resumoContainer = document.getElementById('resumo');
            
            // Verifica se o resumo est√° vazio ou indefinido
            if (!data.resumo_avaliacao || data.resumo_avaliacao.trim() === "") {
                resumoContainer.innerHTML = "Esse produto n√£o possui avalia√ß√µes suficientes.";
            } else {
                resumoContainer.innerHTML = data.resumo_avaliacao
                    .replace(/\n/g, "<br>")
                    .replace(/[*]/g, "") // Remove asteriscos
                    .replace(/[._]/g, "") // Remove pontos e underscores
                    .replace(/#/g, ""); // Remove hashtags
            }
        }

        // Fun√ß√£o para exibir as avalia√ß√µes
        function displayAvaliacoes(data, palavraChave = '') {
            const avaliacoesContainer = document.getElementById('avaliacoes');

            // Filtra as avalia√ß√µes se uma palavra-chave for fornecida
            let avaliacoesFiltradas = data.avaliacoes.filter(avaliacao => 
                avaliacao.avaliacao.toLowerCase().includes(palavraChave.toLowerCase())
            );
            
            // Limita √†s √∫ltimas 5 avalia√ß√µes
            avaliacoesFiltradas = avaliacoesFiltradas.slice(-5);

            // Renderiza as avalia√ß√µes filtradas
            if (avaliacoesFiltradas.length === 0) {
                avaliacoesContainer.innerHTML = "<p>Nenhuma avalia√ß√£o encontrada.</p>";
            } else {
                avaliacoesContainer.innerHTML = avaliacoesFiltradas.map(avaliacao => `
                    <div class="avaliacao">
                        <p class="nome-usuario"><b>${avaliacao.nome_usuario}</b></p>
                        <span class="nota">${'‚≠ê'.repeat(avaliacao.nota)}</span>
                        <p>${avaliacao.avaliacao}</p>
                    </div>
                `).join('');
            }
        }

        // Fun√ß√£o para buscar os dados da API
        function fetchData() {
            fetch('https://flask-production-83d6.up.railway.app/get_reviews?produto_id=S24')
                .then(response => response.json())
                .then(data => {
                    avaliacoesData = data; // Armazena os dados para o filtro
                    displayResumo(data);   // Exibe o resumo
                    displayAvaliacoes(data); // Exibe as avalia√ß√µes sem filtro
                })
                .catch(error => {
                    console.error("Erro ao buscar os dados:", error);
                    document.getElementById('resumo').innerHTML = "Erro ao carregar os dados.";
                });
        }

        // Captura o campo de filtro e o bot√£o
        const filtroInput = document.getElementById('filtro-palavra-chave');
        const botaoFiltrar = document.getElementById('botao-filtrar');

        // Adiciona o evento de clique ao bot√£o para disparar a filtragem
        botaoFiltrar.addEventListener('click', function() {
            const palavraChave = filtroInput.value;

            // S√≥ aplica o filtro se os dados j√° tiverem sido carregados
            if (avaliacoesData) {
                displayAvaliacoes(avaliacoesData, palavraChave); // Atualiza a lista com base no filtro
            }
        });
		
	function sendComment() {
		const comment = document.getElementById('userComment').value;
		const name = document.getElementById('userName').value;
		const rating = document.getElementById('userRating').value;

		if (!comment || !name || !rating) {
			alert('Por favor, preencha todos os campos.');
			return;
		}

		const payload = {
			avaliacao: comment,
			nome_usuario: name,
			nota: parseInt(rating),
			produto_id: 'S24'
		};

		fetch('https://flask-production-83d6.up.railway.app/save_review', {
			method: 'POST',
			headers: {
				'Accept': 'application/json',
				'Content-Type': 'application/json'
			},
			body: JSON.stringify(payload)
		})
		.then(response => {
			if (!response.ok) {
				throw new Error('Erro ao enviar coment√°rio');
			}
			return response.json();
		})
		.then(() => {
			alert('Coment√°rio enviado com sucesso!');
			fetchData(); // Atualiza a lista de avalia√ß√µes
			document.getElementById('commentForm').reset(); // Limpa o formul√°rio
		})
		.catch(console.error);
	}

	window.onload = fetchData;
</script>


<script src="js/jquery.min.js"></script>
<script src="js/jquery-migrate-3.0.1.min.js"></script>
<script src="js/popper.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery.easing.1.3.js"></script>
<script src="js/jquery.waypoints.min.js"></script>
<script src="js/jquery.stellar.min.js"></script>
<script src="js/owl.carousel.min.js"></script>
<script src="js/jquery.magnific-popup.min.js"></script>
<script src="js/aos.js"></script>
<script src="js/jquery.animateNumber.min.js"></script>
<script src="js/bootstrap-datepicker.js"></script>
<script src="js/scrollax.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
<script src="js/google-map.js"></script>
<script src="js/main.js"></script>

  </body>
</html>